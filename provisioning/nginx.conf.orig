server {
  listen      8010;
  server_name server.voisietequi.it server.staging.voisietequi.it;
  access_log  /var/log/nginx/vsq.access.log;
  error_log   /var/log/nginx/vsq.error.log;

  # proxy requests for /webshots to openpolis server
  location /webshots {
    proxy_pass http://webshots.openpolis.it/vsq-screenshots;
    proxy_redirect default;
  }

  # handle computation requests to other  server 

  location /computation/ {
    include       uwsgi_params;
    uwsgi_pass    computers;
  }

  location /coordinate_partiti/ {
    include       uwsgi_params;
    uwsgi_pass    computers;
  }

  location /static/ {
    alias     /home/vsq13/public/static/;
  }
  location /media/ {
    alias  /home/vsq13/public/media/;
  }
  location /favicon.ico {
    alias /home/vsq13/public/static/favicon.ico;
  }
  location / {
    include       uwsgi_params;

    uwsgi_param X-Real-IP $http_x_forwarded_for;
    uwsgi_pass    127.0.0.1:8020;
  }
}
