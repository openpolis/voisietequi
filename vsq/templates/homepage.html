{% extends 'base.html' %}
{% load labels %}

{% block title %}Homepage{% endblock %}

{% block header_scripts %}
    <script type="text/javascript">
        var coordinate = {{ coordinate|safe }};
        var partiti = {
            {% for l in partiti %}
                '{{ l.sigla }}': {
                    'colore': "{{ l.coalizione.colore }}"
                }{% if not forloop.last %},{%  endif %}
            {% endfor %}
        }
    </script>
{% endblock %}

{% block scripts %}
    <script type="text/javascript">
        {% block generate_dynamic_content %}

            //quando la dimensione della finestra cambia, vengono ricalcolate le grandezze
            //del grafico
            $(window).on("resize", function() {
                if(browser_check()){
                    clearTimeout(500);
                    resize();
                }
            });

            $(document).ready(function() {
                if(browser_check()){
                    resize();
                    draw_graph(coordinate);
                }
            });
        {% endblock %}
    </script>

    <script src="{{ STATIC_URL }}js/risposteUtente.js?"></script>
    <script src="{{ STATIC_URL }}js/utils.js"></script>
    <script src="{{ STATIC_URL }}js/underscore.min.js"></script>
    <script src="{{ STATIC_URL }}js/d3.min.js"></script>
    {#script for the final graph #}
    <script type="text/javascript" src="{{ STATIC_URL }}js/force_labels.js"></script>

    {#stili per label e marker del grafico#}
    <style>


        #permalink { cursor: auto; }

        .labelbox {
            color:green;
            opacity:0.8
        }

        .labeltext {
            color:black;
            font-weight:bold;
            text-anchor:middle;
            font-family: Arial, sans-serif;
            text-transform: uppercase;
            font-size: 12px;
        }
        .link {
            stroke:gray;
            stroke-width:0.35
        }
        .connection-line {
            stroke:gray;
            stroke-width:0.5
        }


        .nickname {
            color:white;
            font-weight:bold;
            text-anchor:middle;
            font-family: Arial, sans-serif;
            text-transform: uppercase;
            font-size: 12px;
        }


    </style>

{% endblock %}

{% block content %}

  <div class="sfondo-verde">
    <div class="container">
      <div class="hero-unit">

        <div class="row-fluid">
          <div class="span12">
            <h1>Perso nella campagna elettorale?</h1>
            <div class="row-fluid">
              <div class="span4">
                <h1><strong>Orientati qui!</strong></h1>
                <p>Le distanze tra liste elettorali sono calcolate confrontando le
                    <strong>diverse posizioni su 25 temi</strong>.<br><br>
                  Le liste hanno risposto direttamente a tutti i temi, tranne <strong>Pd</strong>, <strong>Fli</strong> e
                    <strong>M5S</strong> il cui posizionamento è stato elaborato da Openpolis.</p>
                  <div class="box-verde">
                  <p><strong>{{ conteggio_utenti }} cittadini</strong><br />conoscono già la loro posizione.</p>
                  <a href="{% url questionario-utente %}" class="btn btn-danger btn-large">Scopri dove sei! &raquo;</a>
                </div>
              </div>
              <div class="span6 offset1">
                  <div class="grafico_background"  style="background-image: url('{{ STATIC_URL }}img/grafico/bg_liste.png');">
                      <div class="grafico" id="grafico" style=""></div>
                      <div id="browser_issue">
                         <p>
                             Spiacenti, il browser che hai installato non supporta la visualizzazione del grafico di Voi siete qui.
                          </p>
                          <p>
                              Ti consigliamo di scaricare una versione pi&ugrave; aggiornata del tuo browser.
                          </p>
                      </div>
                  </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>


  <div class="row-fluid">
    <div class="span12">
        {% for partito in partiti_up %}
        <div class="pull-left barra-coalizione barra-coalizione-{{ partito.coalizione.slug }}">
          {% immagine_partito partito size='big' %}
        </div>
        {% endfor %}
    </div>
  </div>

  <div class="row-fluid">
    <div class="span12">
        {% for partito in partiti_dn %}
            <div class="pull-left barra-coalizione barra-coalizione-{{ partito.coalizione.slug }}">
                {% immagine_partito partito size='big' %}
            </div>
        {% endfor %}
    </div>
  </div>



  <div class="container">
    <div class="row-fluid">
      <div class="span3 linea-vert">Un progetto<p><a href="http://www.openpolis.it/"><img src="{{ STATIC_URL }}img/openpolis_logo.png" alt="Openpolis" /></a></p></div>
      <div class="span3 linea-vert">Realizzato da<p><a href="http://www.depp.it/"><img src="{{ STATIC_URL }}img/depp_logo.png" alt="Depp" /></a></p></div>
      <div class="span5 linea-vert">Supportato da<p><a href="http://www.mimesi.com/"><img src="{{ STATIC_URL }}img/mimesi_logo.png" alt="Mimesi" /></a><a href="http://www.top-ix.org/"><img src="{{ STATIC_URL }}img/topix_logo.png" alt="Top ix" /></a></p></div>
    </div>
  </div>
{% endblock %}


